<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <!-- Session -->
  <script>
    if (!sessionStorage.getItem("username"))
      location.href = "index.html";
  </script>

  <title>ITR</title>

  <link rel="icon" href="./img/flower.png" type="image/x-icon">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="./css/tables.css">
  <link rel="stylesheet" href="css/admincontent.css">
  <link rel="stylesheet" href="css/temp_chat.css">
  <!-- Google fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- tables sort -->
  <link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css">
  <!-- Font Awesome JS -->
  <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"
    integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ"
    crossorigin="anonymous"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js"
    integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/moment@2.24.0/moment.min.js"></script>
  <script src="js/admin_animation.js"></script>
</head>

<body>
  <div class="row" id="body-row">
    <!-- Sidebar  -->
    <div id="sidebar-container" class="sidebar-collapsed d-none d-md-block">
      <!-- Bootstrap List Group -->
      <ul class="list-group">
        <!-- Menu with submenu -->
        <a style="padding: 0;" href="reportsummary.html" data-toggle="sidebar-colapse"
          class="bg-light list-group-item list-group-item-action d-flex align-items-center" title="Sakura">
          <div class="d-flex w-100 justify-content-start align-items-center">
            <span><img src="img/flower.png" alt="logo" style="width:40px; margin-left: 10px;"></span>
            <!-- <span id="collapse-text" class="menu-collapsed">Collapse</span> -->
          </div>
        </a>
        <a href="#" id="notifDropdown" class="list-group-item list-group-item-action d-flex align-items-center"
          role="button" aria-haspopup="true" aria-expanded="false" onclick="showNotifs()">
          <div class="d-flex w-100 justify-content-start align-items-center">
            <i class="fa fa-bell fa-fw mr-3 nav_icon"></i>
          </div>
        </a>
        <a data-toggle="collapse" aria-expanded="false"
          class="bg-light list-group-item list-group-item-action flex-column align-items-start" title="Chat"
          style="cursor: pointer;" onclick="showOrHide()">
          <div class="d-flex w-100 justify-content-start align-items-center">
            <span class="fa fa-comment fa-fw mr-3" style="color: #8A6E59"></span>
            <span id="totalCount" class="badge badge-pill badge-danger p-1"></span>
            <span class="submenu-icon d-none ml-auto"></span>
          </div>
        </a>
        <a href="graphs.html" class="bg-light list-group-item list-group-item-action" title="Charts">
          <div class="d-flex w-100 justify-content-start align-items-center">
            <span class="fa fa-cube fa-fw mr-3" style="color: #8A6E59"></span>
            <span class="submenu-icon d-none ml-auto"></span>
          </div>
        </a>
        <a class="act" href="category.html" class="bg-light list-group-item list-group-item-action" title="Category">
          <div class="d-flex w-100 justify-content-start align-items-center">
            <span class="fa fa-list fa-fw mr-3" style="color: #8A6E59;  margin-left: 35%; margin-top: 25%;"></span>
          </div>
        </a>
        <a href="users.html" class="bg-light list-group-item list-group-item-action" title="Users">
          <div class="d-flex w-100 justify-content-start align-items-center">
            <span class="fa fa-user fa-fw mr-3" style="color: #8A6E59"></span>
          </div>
        </a>
        <a href="reports-admin.html" class="bg-light list-group-item list-group-item-action" title="Table">
          <div class="d-flex w-100 justify-content-start align-items-center">
            <span class="fa fa-table fa-fw mr-3" style="color: #8A6E59"></span>
          </div>
        </a>
        <!-- <a href="print.html" class="bg-light list-group-item list-group-item-action" title="Table">
                    <div class="d-flex w-100 justify-content-start align-items-center">
                        <span class="fa fa-print fa-fw mr-3" style="color: #8A6E59"></span>
                    </div>
            </a>    -->
        <!-- Separator -->
        <li class="list-group-item sidebar-separator-title text-muted d-flex align-items-center menu-collapsed"
          style="background-color: #282421;">
          <small></small>
        </li>
        <!-- /END Separator -->
        <a href="#language" data-toggle="collapse" aria-expanded="false"
          class="bg-light list-group-item list-group-item-action flex-column align-items-start" title="Language">
          <div class="d-flex w-100 justify-content-start align-items-center">
            <span class="fa fa-language fa-fw mr-3" style="color: #8A6E59"></span>
            <span class="submenu-icon d-none ml-auto"></span>
          </div>
        </a>
        <!-- Submenu content -->
        <div id='language' class="collapse sidebar-submenu" style="border-radius: none;">
          <a href="#" class="list-group-item list-group-item-action bg-light justify-content-start align-items-center"
            style="padding: 0;">
            <p style="color: #8A6E59; padding-left:20px; padding-top: 10px;">EN</p>
          </a>
          <a href="JP/reportsummary.html"
            class="list-group-item list-group-item-action bg-light justify-content-start align-items-center"
            style="padding: 0;">
            <p style="color: #8A6E59; padding-left:20px; padding-top: 10px;">JP</p>
          </a>
        </div>
        <a href="#" class="bg-light list-group-item list-group-item-action" title="Logout" data-toggle="modal"
          data-target="#logoutModal">
          <div class="d-flex w-100 justify-content-start align-items-center">
            <span class="fa fa-sign-out-alt fa-fw mr-3" style="color: #8A6E59"></span>
          </div>
        </a>
      </ul><!-- List Group END-->
    </div>
    <!-- end of sidebar -->

    <div class="container" id="table-container">
      <h2 id="header-title">
        カテゴリーマネジメント
        <small class="text-muted">カテゴリーを追加または削除する</small>
      </h2>
      <div class="row">
        <button id="add-user-btn" type="button" class="btn btn-main" data-toggle="modal" data-target="#addNewUserModal">
          <i class="fas fa-file-medical"></i> 新しいカテゴリーを追加
        </button>
      </div>

      <!-- CATEGORY TABLE -->
      <div id="categoryTable">
        <div id="loader"></div>
      </div>

      <!-- Add category Modal -->
      <div class="modal fade" id="addNewUserModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">新しいカテゴリーを追加</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form>
                <div class="form-group">
                  <label for="exampleFormControlInput1">カテゴリー名:</label>
                  <input type="text" class="form-control" name="category_name" placeholder="">
                </div>
                <div class="form-group">
                  <label for="exampleFormControlInput1">カテゴリーの説明:</label>
                  <input type="text" class="form-control" name="description" placeholder="">
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">閉じる</button>
              <button type="button" class="btn btn-main" onclick="addCategory()">完了</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Logout Modal-->
  <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">ログアウトしますか？</h5>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">このアカウントからログアウトしますか？</div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">キャンセル</button>
          <button class="btn btn-primary" onclick="logOut()">ログアウト</button>
        </div>
      </div>
    </div>
  </div>

  <div id="chat-container" style="margin-left: 60px !important;">
    <div id="chat-toast" class="toast" role="alert" data-autohide="false" aria-live="assertive" aria-atomic="true">
      <div class="toast-header">
        <button style="display:none" type="button" id="back-btn" onclick="back()" class="btn btn-info"></button>
        <div id="user-chat">
          <img src="./img/flower.png" style="width: 30px; height: 30px;">
        </div>
        <strong id="chat-title" class="mr-auto">&nbsp;チャット</strong>
        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
          <span onclick="hideChat()" aria-hidden="true">&times;</span>
        </button>
      </div>

      <div id="admin-search">
        <div class="input-group mb-3 row no-gutters">
          <input type="text" id="searcharea-message" class="form-control" onkeyup="searchUser()"
            placeholder="ユーザーを探して..." aria-label="ユーザーを探して..." aria-describedby="basic-addon2">
          <div class="input-group-append">
            <button type="button" id="search-btn" class="btn btn-info"></button>
          </div>
        </div>

        <!--list of chat from users-->
        <div id="user_list"
          class="toast-body row no-gutters d-flex justify-content-center scrollbar scrollbar-rare-wind"
          style="max-height:300px;overflow-y: scroll;">
        </div>

      </div>

      <div id="message-container" class="toast-body scrollbar scrollbar-rare-wind"
        style="display:none;background-color: #F5F5F5">

      </div>
      <div id="chat-footer" class="form-group row no-gutters" style="display:inline;height:50px!important;">
        <textarea class="form-control textarea col-10 scrollbar scrollbar-rare-wind" rows="1" cols="3"
          disabled></textarea>
        <button type="button" disabled class="col-2 btn btn-info"></button>
      </div>
      <div id="send-message" style="display:none;" class="form-group row no-gutters justify-content-around mb-0">
        <label for="attachment" id="attach-label" class="col-2 no-border-btn waves-effect waves-light">
          <input type="file" id="attachment" onchange="addAttachment(this)" name="attachment" accept="image/*">
        </label>
        <div class="col-8 bg-white mb-1 d-flex">
          <div id="attach-group">
            <img src="" id="attach-prev">
            <span class="font-weight-bold" id="remove-attach" onclick="removeAttachment()">X</span>
          </div>
          <textarea class="form-control scrollbar textarea scrollbar-rare-wind" id="textarea-message" rows="1" cols="3"
            placeholder="メッセージを入力してください"></textarea>
        </div>
        <button type="button" id="chat-btn" onclick="sendMessage()"
          class="col-2 no-border-btn waves-effect waves-light"></button>
      </div>
    </div>
  </div>

  <div id="notif-cont" style="position:absolute;top:0px!important; left:0px!important;z-index:5">
  </div>

  <!-- scripts -->
  <!-- bootstrap jquery -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <!-- datatables sorting -->
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>

  <!-- Firebase core Javascript-->
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"> </script>
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-messaging.js"> </script>
  <script src="js/firestore.js"> </script>

  <!-- Custom JS -->
  <script src="js/dataloader.js"></script>
  <script src="js/notification.js"></script>
  <!-- <script src="js/reportSummary.js"></script> -->
  <script src="js/category.js"></script>
  <script src="js/temp_chat.js"></script>

  <!-- script -->
  <!-- <script>
      $(document).ready(function() {
          $('#example').DataTable();
      });
    </script> -->
  <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.27.1.js"></script>
</body>

</html>