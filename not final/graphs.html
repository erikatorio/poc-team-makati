<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- Session -->
    <script>
        if (!sessionStorage.getItem("username"))
        location.href = "index.html";
    </script>

    <title>ITR</title>
    
    <link rel="icon" href="./img/flower.png" type="image/x-icon">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/graphs.css">
    <link rel="stylesheet" href="css/admincontent.css">

    <!-- jQuery UI -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Google fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"
    integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ"
    crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js"
      integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY"
      crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.24.0/moment.min.js"></script>
    <script src="js/admin_animation.js"></script>
    
</head>
<body>
    <div class="row" id="body-row">
        <!-- Sidebar  -->
        <div id="sidebar-container" class="sidebar-collapsed d-none d-md-block">
            <!-- Bootstrap List Group -->
            <ul class="list-group">
                <!-- Menu with submenu -->
                <a style="padding: 0;" href="reportsummary.html" data-toggle="sidebar-colapse" class="bg-light list-group-item list-group-item-action d-flex align-items-center" title="Sakura">
                    <div class="d-flex w-100 justify-content-start align-items-center">
                        <span><img src="img/flower.png" alt="logo" style="width:40px; margin-left: 10px;"></span>
                        <!-- <span id="collapse-text" class="menu-collapsed">Collapse</span> -->
                    </div>
                </a>
                <a href="#submenu1" data-toggle="collapse" aria-expanded="false" class="bg-light list-group-item list-group-item-action flex-column align-items-start" title="Notification">
                    <div class="d-flex w-100 justify-content-start align-items-center">
                        <span class="fa fa-bell fa-fw mr-3" style="color: #8A6E59"></span> 
                        <span class="submenu-icon d-none ml-auto"></span>
                    </div>
                </a>
                <a data-toggle="collapse" aria-expanded="false" class="bg-light list-group-item list-group-item-action flex-column align-items-start" title="Chat" style="cursor: pointer;">
                    <div class="d-flex w-100 justify-content-start align-items-center">
                        <span class="fa fa-comment fa-fw mr-3" style="color: #8A6E59"></span> 
                        <span class="submenu-icon d-none ml-auto"></span>
                    </div>
                </a>	
                <a class="act" href="graphs.html" class="bg-light list-group-item list-group-item-action" title="Charts">
                    <div class="d-flex w-100 justify-content-start align-items-center">
                        <span class="fa fa-cube fa-fw mr-3" style="color: #8A6E59; margin-left: 35%; margin-top: 25%;"></span> 
                        <span class="submenu-icon d-none ml-auto"></span>
                    </div>
                </a>
                <a href="category.html" class="bg-light list-group-item list-group-item-action" title="Category">
                        <div class="d-flex w-100 justify-content-start align-items-center">
                            <span class="fa fa-list fa-fw mr-3" style="color: #8A6E59"></span>
                            <!-- <span class="menu-collapsed"></span>     -->
                        </div>
                    </a>          
                <a href="users.html" class="bg-light list-group-item list-group-item-action" title="Users">
                    <div class="d-flex w-100 justify-content-start align-items-center">
                        <span class="fa fa-user fa-fw mr-3" style="color: #8A6E59"></span>
                    </div>
                </a>
                <a href="reports-admin.html" class="bg-light list-group-item list-group-item-action" title="Table">
                    <div class="d-flex w-100 justify-content-start align-items-center">
                        <span class="fa fa-table fa-fw mr-3" style="color: #8A6E59"></span>
                    </div>
                </a>   
                <!-- <a href="print.html" class="bg-light list-group-item list-group-item-action" title="Table">
                        <div class="d-flex w-100 justify-content-start align-items-center">
                            <span class="fa fa-print fa-fw mr-3" style="color: #8A6E59"></span>
                           
                        </div>
                </a>    -->
                <!-- Separator -->
                <li class="list-group-item sidebar-separator-title text-muted d-flex align-items-center menu-collapsed" style="background-color: #282421;">
                    <small></small>
                </li>
                <!-- /END Separator -->	 
                <a href="#language" data-toggle="collapse" aria-expanded="false" class="bg-light list-group-item list-group-item-action flex-column align-items-start" title="Language">
                    <div class="d-flex w-100 justify-content-start align-items-center">
                        <span class="fa fa-language fa-fw mr-3" style="color: #8A6E59"></span>
                        <span class="submenu-icon d-none ml-auto"></span>
                    </div>
                </a>
                <!-- Submenu content -->
                <div id='language' class="collapse sidebar-submenu" style="border-radius: none;">
                    <a href="#" class="list-group-item list-group-item-action bg-light justify-content-start align-items-center" style="padding: 0;">
                        <p style="color: #8A6E59; padding-left:20px; padding-top: 10px;">EN</p>
                    </a>
                    <a href="JP/reportsummary.html" class="list-group-item list-group-item-action bg-light justify-content-start align-items-center" style="padding: 0;">
                        <p style="color: #8A6E59; padding-left:20px; padding-top: 10px;">JP</p>
                    </a>
                </div>           
                <a href="#" class="bg-light list-group-item list-group-item-action" title="Logout" data-toggle="modal" data-target="#logoutModal">
                    <div class="d-flex w-100 justify-content-start align-items-center">
                        <span class="fa fa-sign-out-alt fa-fw mr-3" style="color: #8A6E59"></span>
                    </div>
                </a>
            </ul><!-- List Group END-->
        </div>
        <!-- end of sidebar -->
        <!-- content -->
        <!-- Nav tabs -->
        <div class="container" id="graph-whole">
            <ul class="nav nav-tabs" style="margin-top: -40px;">
                <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" href="#firstgraph">３Ｄグラフ</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#secondgraph">棒グラフ</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#piegraph">円グラフ</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#trend">トレンド</a>
                </li>
        </ul>
        
        <!-- Tab panes -->
        <div class="tab-content">
            <!-- 3d graph container -->
            <div class="tab-pane container active" id="firstgraph">
                <div class="container graph-container">
                    <div id="graph3d" class="h-100"></div>
                </div>
            </div>
            <div class="tab-pane container fade" id="secondgraph">
                <div class="container graph-container">
                    <div class="row">
                        <!-- Container for search bar and search button -->
                        <div class="d-flex">
                            <input id="searchBox" type="text" size="15"
                                style="text-align: left;" placeholder="Search" value=""
                                onkeypress="searchBoxField()" onfocus="this.value=''">
                            <input id="searchButton" class="material-icons" type="button"
                                value="search" onclick="searchBoxField()">
                        </div>
                        <!-- End of Search Bar and Search Button -->

                        <!-- Container for Change Bar Graph Page Buttons -->
                        <div class="d-flex">
                            <input id="prev" class="material-icons" type="button"
                                value="chevron_left" onclick="prevButton()" disabled="true">
                            <input id="search" type="text" size="1" disabled
                                style="text-align: center;" placeholder="Search" value="1"
                                hidden>
                            <input id="next" class="material-icons" type="button"
                                value="chevron_right" onclick="nextButton()">
                        </div>
                        <!-- End of Change Bar Graph Page Buttons -->
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="inlineRadioOptions" id="group" value="1" checked="checked">デパートメント
                            </label>
                        </div>
                        <div class="form-check-inline">
                            <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="inlineRadioOptions" id="category" value="2">カテゴリー
                            </label>
                        </div>

                    </div>
                    <div class="row">
                        <canvas id="bargraph"></canvas>
                    </div>
                </div>
            </div>
            <div class="tab-pane container fade" id="piegraph">
                <div class="container graph-container">
                    <div class="row">
                        <div class="form-check-inline">
                            <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="inlineRadioOptionsPie" id="dept" value="1" checked="checked">デパートメント
                            </label>
                        </div>
                        <div class="form-check-inline">
                            <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="inlineRadioOptionsPie" id="incident" value="2">カテゴリー
                            </label>
                        </div>

                        <div class="form-check form-check-inline mr-0 btn-group"> 
                            <button style="background-color: #ff9999; height: 38px; border-color: #ff9999;" 
                                    class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="material-icons">cloud_download</i>
                            </button>
                            <div id="dropdownMenu" class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a class="dropdown-item" href="#" onclick="printPieGraphs(0)">PDF</a>
                                <a class="dropdown-item" href="#" onclick="printPieGraphs(1)">JPG</a>
                                <a class="dropdown-item" href="#" onclick="printPieGraphs(2)">PNG</a>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <canvas id="piechart"></canvas>
                    </div>
                </div>
            </div>
            <div class="tab-pane container fade" id="trend">
                <div class="container graph-container">
                    <div class="row">
                        <div class="dropdown show">
                            <a class="btn dropdown-toggle" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                期間
                            </a>
                          
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                              <a class="dropdown-item" id="weekly" href="#" onclick="changeDropdownLabel(0)">週間</a>
                              <a class="dropdown-item" id="monthly" href="#" onclick="changeDropdownLabel(1)">月間</a>
                              <a class="dropdown-item" id="yearly" href="#" selcted onclick="changeDropdownLabel(2)">年間</a>
                            </div>
                        </div>
                        
                        <div class="form-check form-check-inline mr-0 btn-group">
                            <button style="background-color: #ff9999; height: 38px; border-color: #ff9999;" 
                                    class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="material-icons">cloud_download</i>
                            </button>
                            <div id="dropdownMenu" class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a class="dropdown-item" href="#" onclick="printGraphs(0)">PDF</a>
                                <a class="dropdown-item" href="#" onclick="printGraphs(1)">JPG</a>
                                <a class="dropdown-item" href="#" onclick="printGraphs(2)">PNG</a>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <canvas id="trendgraph"></canvas>
                    </div>
                </div>
            </div>
        </div>
    
        </div>
    </div>

    <!-- Logout Modal-->
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <button class="btn btn-primary" onclick="logOut()">Logout</button>
          </div>
        </div>
      </div>
    </div>
    <!-- scripts -->

    <!-- jQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

     <!-- Popper.JS -->
     <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
     integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
     crossorigin="anonymous"></script> -->

    <!-- Bootstrap jQuery -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script>
        function showGraph(element)  {
            var tabContents = document.getElementsByClassName('tabContent');
            for (var i = 0; i < tabContents.length; i++) { 
                tabContents[i].style.display = 'none';
            }

            // change tabsX into tabs-X in order to find the correct tab content
            var tabContentIdToShow = element.id.replace(/(\d)/g, '-$1');
            document.getElementById(tabContentIdToShow).style.display = 'block';
            element.className += "active";
        }
    </script>

    <!-- Firebase core Javascript-->
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"> </script>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-messaging.js"> </script>
    <script src="js/firestore.js"> </script>

    <!-- jQuery UI JS -->
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- Popper JS
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
      integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
      crossorigin="anonymous"></script>
      
    Bootstrap JS
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script> -->

    <!-- Vis Js core JavaScript-->
    <script type="text/javascript" src="https://unpkg.com/vis-graph3d@latest/dist/vis-graph3d.min.js"></script>

    <!-- Chart JS -->
    <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.min.js"></script>

    <!-- jsPDF Javascript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"
        integrity="sha256-gJWdmuCRBovJMD9D/TVdo4TIK8u5Sti11764sZT1DhI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"
        integrity="sha256-c3RzsUWg+y2XljunEQS0LqWdQ04X1D3j22fd/8JCAKw=" crossorigin="anonymous"></script>

    <!-- Custom JS -->
    <script src="js/dataloader.js"></script>
    <script src="js/graphWindowLoader.js"></script>
    <script src="js/graph3d.js"></script>
    <script src="js/graph2d.js"></script>

    <script>
        var ctxTrend = document.getElementById('trendgraph').getContext('2d');
        var ctx2d = document.getElementById('bargraph').getContext('2d');
        var ctx = document.getElementById('piechart').getContext('2d');
    </script>

</body>
</html>